<!doctype html>
<html lang="zh-CN">

<head>
  <meta charset="gb2312" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>About - KoaSayi</title>
  <script>
    // Apply stored theme early to prevent flash
    (function(){
      try {
        var s = localStorage.getItem('theme');
        if (s) document.documentElement.setAttribute('data-theme', s);
        else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) document.documentElement.setAttribute('data-theme','dark');
      } catch (e) { /* ignore */ }
    })();
  </script>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="site-header">
    <div class="wrap">
      <h1 class="site-title">KoaSayi</h1>
      <p class="site-desc">IT-服务、交流与发展</p>
      <button id="theme-toggle" class="theme-toggle" aria-label="切换主题">换！</button>
    </div>
  </header>

  <nav class="site-nav">
    <div class="wrap">
      <a href="index.html" title="home">home</a>
      <a href="friends.html" title="friends">Friends</a>
      <a href="about.html" title="about">about</a>
    </div>
  </nav>

  <main class="wrap main-grid">
    <section class="content">

      <article class="post aero-card" data-crack="2">
        <h2 class="post-title">关于 KoaSayi</h2>
        <p class="post-meta">最后更新：2026-02-12</p>
        <p>
        </p>
        <p>KoaSayi接下来展示你可以联系的社交软体</p>
      </article>

      <!-- Frutiger Aero: 社交链接玻璃方块 -->
      <div class="aero-grid" style="margin-top:1rem;">
        <a class="aero-card" href="https://space.bilibili.com/582023723" target="_blank" rel="noopener" data-crack="1">
          <h4>bilibili</h4>
          <p>糯米涨价了</p>
        </a>
        <a class="aero-card" href="https://discord.com/" target="_blank" rel="noopener" data-crack="2">
          <h4>discord</h4>
          <p>注意,此链接会跳转到Discord官网,请在App端中点击好友-添加好友-输入KoaSayi-发送好友请求</p>
        </a>
        <a class="aero-card" href="https://www.youtube.com/@KoaSayi" target="_blank" rel="noopener" data-crack="3">
          <h4>youtube</h4>
          <p>不常看YT</p>
        </a>
        <a class="aero-card" href="https://github.com/KoaSayi" target="_blank" rel="noopener" data-crack="1">
          <h4>github</h4>
          <p>项目用AI</p>
        </a>
      </div>

    </section>

    <aside class="sidebar">
      <div class="card">
        <h3>about KoaSayi</h3>
        <p>5cena</p>
      </div>

      <div class="card">
        <h3>contact</h3>
        <p>邮箱：<a href="mailto:hdb97028@gmail.com">hdb97028@gmail.com</a></p>
      </div>

    </aside>
  </main>

  <footer class="site-footer">
    <div class="wrap">
      <p>? 2025 KoaSayi。</p>
    </div>
  </footer>

  <!-- 修复玻璃按钮（默认隐藏） -->
  <button id="repair-btn" aria-hidden="true">一键修复</button>

  <script>
    (function () {
      const doc = document.documentElement;
      const toggle = document.getElementById('theme-toggle');

      function safeSetTheme(theme) {
        if (!theme) return;
        doc.setAttribute('data-theme', theme);
        try { localStorage.setItem('theme', theme); } catch (e) { /* ignore */ }
      }

      const stored = (function () { try { return localStorage.getItem('theme'); } catch (e) { return null; } })();
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      safeSetTheme(stored === 'dark' || (!stored && prefersDark) ? 'dark' : 'light');

      function updateIcon() {
        const isDark = doc.getAttribute('data-theme') === 'dark';
        if (toggle) toggle.textContent = isDark ? '我怕暗' : '我怕亮';
      }

      if (toggle) {
        toggle.addEventListener('click', () => {
          const isDark = doc.getAttribute('data-theme') === 'dark';
          const next = isDark ? 'light' : 'dark';
          safeSetTheme(next);
          updateIcon();
        });
      }

      if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
          try {
            if (!localStorage.getItem('theme')) {
              safeSetTheme(e.matches ? 'dark' : 'light');
              updateIcon();
            }
          } catch (err) { /* ignore */ }
        });
      }

      updateIcon();
    })();
  </script>

  <script>
    (function () {
      // Frutiger Aero: shatter / aero-card behavior
      const clickState = new WeakMap();
      const repairBtn = document.getElementById('repair-btn');

      const $ = (sel, ctx = document) => ctx.querySelector(sel);
      const $$ = (sel, ctx = document) => Array.from(ctx.querySelectorAll(sel));

      function resetCount(card) {
        const s = clickState.get(card) || { count: 0, timer: null };
        s.count = 0;
        if (s.timer) { clearTimeout(s.timer); s.timer = null; }
        clickState.set(card, s);
      }

      function incrementClick(card) {
        const s = clickState.get(card) || { count: 0, timer: null };
        s.count += 1;
        if (s.timer) clearTimeout(s.timer);
        s.timer = setTimeout(() => { s.count = 0; s.timer = null; clickState.set(card, s); }, 1200);
        clickState.set(card, s);
        return s.count;
      }

      function showRepair(yes) {
        if (!repairBtn) return;
        repairBtn.classList.toggle('visible', !!yes);
        repairBtn.setAttribute('aria-hidden', yes ? 'false' : 'true');
      }

      function generateRandomPolygon() {
        const points = [];
        const cx = 45 + Math.random() * 10;
        const cy = 40 + Math.random() * 20;
        const count = 4 + Math.floor(Math.random() * 3);
        for (let i = 0; i < count; i++) {
          const angle = (Math.PI * 2 / count) * i + (Math.random() - 0.5) * 0.6;
          const r = 22 + Math.random() * 55;
          const x = Math.max(0, Math.min(100, cx + Math.cos(angle) * r));
          const y = Math.max(0, Math.min(100, cy + Math.sin(angle) * r));
          points.push(`${x}% ${y}%`);
        }
        return points;
      }

      function shatter(card, pointerX, pointerY) {
        if (!card) return;
        const maxOverlays = 4;
        card.classList.add('shattered');
        const rect = card.getBoundingClientRect();
        const cx = (pointerX !== undefined ? pointerX : (rect.left + rect.width / 2)) - rect.left;
        const cy = (pointerY !== undefined ? pointerY : (rect.top + rect.height / 2)) - rect.top;

        const overlays = card._crackOverlays || [];
        if (overlays.length >= maxOverlays) {
          const old = overlays.shift();
          if (old) {
            old.style.transition = 'opacity .35s ease';
            old.style.opacity = '0';
            setTimeout(() => { try { old.parentNode && old.parentNode.removeChild(old); } catch (e) {} }, 380);
          }
        }

        const overlay = document.createElement('div');
        overlay.className = 'crack-overlay';
        const nextIndex = (overlays.length % 3) + 1;
        overlay.setAttribute('data-crack', card.dataset.crack || String(nextIndex));
        overlay.style.pointerEvents = 'none';

        const svgNS = 'http://www.w3.org/2000/svg';
        const svg = document.createElementNS(svgNS, 'svg');
        svg.setAttribute('class', 'crack-svg');
        svg.setAttribute('viewBox', `0 0 ${rect.width} ${rect.height}`);
        svg.setAttribute('preserveAspectRatio', 'none');

        const lines = 8 + Math.floor(Math.random() * 6);
        for (let i = 0; i < lines; i++) {
          const angle = (Math.PI * 2 / lines) * i + (Math.random() - 0.5) * 0.6;
          const len = Math.max(rect.width, rect.height) * (0.25 + Math.random() * 0.9);
          const x2 = cx + Math.cos(angle) * len;
          const y2 = cy + Math.sin(angle) * len;
          const path = document.createElementNS(svgNS, 'path');
          path.setAttribute('d', `M ${cx} ${cy} Q ${(cx + x2) / 2 + (Math.random()-0.5)*30} ${(cy + y2) / 2 + (Math.random()-0.5)*30}, ${x2} ${y2}`);
          path.setAttribute('stroke', 'rgba(255,255,255,0.18)');
          path.setAttribute('stroke-width', (Math.random() * 1.2 + 0.6).toString());
          path.setAttribute('fill', 'none');
          path.setAttribute('stroke-linecap', 'round');
          path.setAttribute('class', 'crack-line');
          svg.appendChild(path);
        }

        const impact = document.createElement('div');
        impact.className = 'impact-spot';
        impact.style.left = `${cx - 18}px`;
        impact.style.top = `${cy - 18}px`;

        overlay.appendChild(svg);
        overlay.appendChild(impact);
        card.appendChild(overlay);

        const shardCount = 7 + Math.floor(Math.random() * 6);
        for (let i = 0; i < shardCount; i++) {
          const shard = document.createElement('div');
          shard.className = 'shard';
          const poly = generateRandomPolygon();
          shard.style.clipPath = `polygon(${poly.join(',')})`;
          shard.style.left = '0';
          shard.style.top = '0';
          const dirX = (Math.random() - 0.5) * 2;
          const dirY = (Math.random() - 0.3) * -1.4;
          const distance = 40 + Math.random() * 160;
          const tx = Math.round(dirX * distance) + 'px';
          const ty = Math.round(dirY * distance) + 'px';
          const rot = Math.round((Math.random() - 0.5) * 720) + 'deg';
          const dur = (900 + Math.random() * 900) + 'ms';
          const delay = Math.round(Math.random() * 140) + 'ms';
          shard.style.setProperty('--tx', tx);
          shard.style.setProperty('--ty', ty);
          shard.style.setProperty('--rot', rot);
          shard.style.animation = `shardFly ${dur} ${Math.random() < 0.5 ? 'cubic-bezier(.2,.8,.2,1)' : 'cubic-bezier(.25,.8,.25,1)'} ${delay} forwards`;

          overlay.appendChild(shard);
        }

        card.classList.add('aero-shake');
        setTimeout(() => card.classList.remove('aero-shake'), 700);

        overlays.push(overlay);
        card._crackOverlays = overlays;
        card._crackOverlay = overlay;

        showRepair(true);
      }

      function repairAll() {
        document.querySelectorAll('.aero-card.shattered').forEach(c => {
          c.classList.remove('shattered');
          if (Array.isArray(c._crackOverlays) && c._crackOverlays.length) {
            c._crackOverlays.forEach(o => {
              try {
                o.style.transition = 'opacity .35s ease';
                o.style.opacity = '0';
                setTimeout(() => { if (o && o.parentNode) o.parentNode.removeChild(o); }, 380);
              } catch (e) { /* ignore */ }
            });
            c._crackOverlays = [];
            c._crackOverlay = null;
            return;
          }
          if (c._crackOverlay) {
            c._crackOverlay.style.transition = 'opacity .35s ease';
            c._crackOverlay.style.opacity = '0';
            setTimeout(() => { if (c._crackOverlay && c._crackOverlay.parentNode) c._crackOverlay.parentNode.removeChild(c._crackOverlay); c._crackOverlay = null; }, 380);
          }
        });
        showRepair(false);
      }

      function bindShatterHandlers() {
        const cards = $$('.aero-card');
        cards.forEach(card => {
          const onPointerDown = e => {
            if (e.pointerType === 'mouse' && e.button !== 0) return;
            const cnt = incrementClick(card);
            if (cnt >= 5) { shatter(card, e.clientX, e.clientY); resetCount(card); }
          };
          const onClick = e => {
            if (e.button && e.button !== 0) return;
            const cnt = incrementClick(card);
            if (cnt >= 5) { shatter(card, e.clientX, e.clientY); resetCount(card); }
          };
          card.addEventListener('pointerdown', onPointerDown);
          card.addEventListener('click', onClick);
        });
      }

      // Convert .card elements inside sidebar to .aero-card for consistent behavior
      (function convertSidebarCards() {
        const aside = $('.sidebar');
        if (!aside) return;
        const existingGrid = $('.aero-grid', aside);
        const cards = $$('.card', aside);
        if (cards.length === 0) return;
        let grid = existingGrid;
        if (!grid) {
          grid = document.createElement('div');
          grid.className = 'aero-grid';
          aside.appendChild(grid);
        }
        cards.forEach(c => {
          c.classList.remove('card');
          c.classList.add('aero-card');
          grid.appendChild(c);
        });
      })();

      bindShatterHandlers();

      if (repairBtn) {
        repairBtn.addEventListener('click', repairAll);
        showRepair(false);
      }

    })();
  </script>
</body>

</html>